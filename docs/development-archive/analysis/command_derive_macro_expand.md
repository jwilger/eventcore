# Command derive macro expansion (eventcore-006)

**Date:** 2025-11-19 (UTC)

To satisfy the eventcore-006 acceptance scenario that requires verifying the macro expansion, I ran:

```
cargo expand --test I-006-command_derive_macro_test > /tmp/i006_expand.rs
```

Relevant portion of the expanded output:

```
impl ::eventcore::CommandStreams for DerivedTransfer {
    fn stream_declarations(&self) -> ::eventcore::StreamDeclarations {
        ::eventcore::StreamDeclarations::try_from_streams(
                <[_]>::into_vec(
                    ::alloc::boxed::box_new([
                        self.source.clone(),
                        self.destination.clone(),
                    ]),
                ),
            )
            .expect("valid stream declarations generated by #[derive(Command)]")
    }
}
```

The derived implementation builds the exact same `Vec<StreamId>` (source, destination) as the manually written `CommandStreams` impl in the same test module, and it feeds that collection into `StreamDeclarations::try_from_streams(...)` with the same `expect` path. That confirms the macro generates the identical infrastructure code developers used to write by hand, satisfying the “cargo expand output matches manual implementation” acceptance criterion for eventcore-006.
